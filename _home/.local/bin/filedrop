#!/bin/bash

set -e

readonly hostname=suki

randdir=
while [[ $randdir == '' || $randdir == */* || $randdir == *-* ]]; do
    randdir="$(openssl rand -base64 10 | head -c 14)"
done
ssh "$hostname" "mkdir filedrop/$randdir"
for file in "$@"; do
    scp "$file" "$hostname:filedrop/$randdir/"
    echo >&2 "https://ds7s.nl/filedrop/$randdir/$(basename "$file")"
done